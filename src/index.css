@tailwind base;
@tailwind components;
@tailwind utilities;

/* Custom styles for energy flow visualization */
.link {
  @apply stroke-current stroke-2 transition-all duration-300;
  stroke-dasharray: 12 12;
  stroke-opacity: 0.2;
}

/* Light mode: use lightest grey for edges */
@media (prefers-color-scheme: light) {
  .link {
    stroke: #d7d8d9;
  }
}

.link-flow {
  animation: flow 2s linear infinite;
  filter: url(#glow);
  transition: none;
}

.link-flow-reverse {
  animation: flow-reverse 2s linear infinite;
  filter: url(#glow);
  transition: none;
}

.node {
  @apply cursor-pointer;
}

.node circle {
  transition: all 0.3s ease;
  stroke: white;
  stroke-width: 1.5;
  stroke-opacity: 0.8;
}

.node:hover circle {
  filter: url(#glow);
  transform: scale(1.1);
}

.node-icon {
  font-size: 14px;
  pointer-events: none;
  fill: white;
  text-anchor: middle;
  dominant-baseline: central;
}

.node-inner-label {
  font-family: system-ui, -apple-system, sans-serif;
  text-shadow: 0px 0px 2px rgba(0, 0, 0, 0.8);
  pointer-events: none;
}

.node-power-value {
  font-family: system-ui, -apple-system, sans-serif;
  text-shadow: 0px 0px 2px rgba(0, 0, 0, 0.8);
  pointer-events: none;
}

.node:hover .node-inner-label,
.node:hover .node-power-value {
  font-weight: bold;
  filter: brightness(1.2);
}

@keyframes flow {
  0% {
    stroke-dashoffset: 24;
  }
  100% {
    stroke-dashoffset: 0;
  }
}

@keyframes flow-reverse {
  0% {
    stroke-dashoffset: 0;
  }
  100% {
    stroke-dashoffset: 24;
  }
}

@keyframes pulse-glow {
  0%, 100% {
    filter: url(#glow) brightness(1);
  }
  50% {
    filter: url(#glow) brightness(1.3);
  }
}

/* Glow effect when hovering over links */
.link:hover {
  filter: url(#glow);
  stroke-width: 4;
}

/* Node type-specific styles */

/* Type-specific glow effects */
.node-building:hover circle { filter: url(#glow-building); }
.node-pv:hover circle { filter: url(#glow-pv); }
.node-grid:hover circle { filter: url(#glow-grid); }
.node-battery:hover circle { filter: url(#glow-battery); }
.node-charge_point:hover circle { filter: url(#glow-charge_point); }

/* Pulse animations for each node type - DISABLED for testing */
/*
@keyframes pulse-node-building {
  0%, 100% { opacity: 1; }
  50% { opacity: 1; }
}

@keyframes pulse-node-pv {
  0%, 100% { opacity: 1; }
  50% { opacity: 1; }
}

@keyframes pulse-node-grid {
  0%, 100% { opacity: 1; }
  50% { opacity: 1; }
}

@keyframes pulse-node-battery {
  0%, 100% { opacity: 1; }
  50% { opacity: 1; }
}

@keyframes pulse-node-charge_point {
  0%, 100% { opacity: 1; }
  50% { opacity: 1; }
}

.node-building.pulse circle { animation: pulse-node-building 4s ease-in-out infinite; }
.node-pv.pulse circle { animation: pulse-node-pv 4s ease-in-out infinite; }
.node-grid.pulse circle { animation: pulse-node-grid 4s ease-in-out infinite; }
.node-battery.pulse circle { animation: pulse-node-battery 4s ease-in-out infinite; }
.node-charge_point.pulse circle { animation: pulse-node-charge_point 4s ease-in-out infinite; }
*/

/* Enhanced node labels */
.node-label {
  text-shadow: 0px 0px 3px rgba(0, 0, 0, 0.8);
  font-family: system-ui, -apple-system, sans-serif;
}

.node-metric {
  text-shadow: 0px 0px 3px rgba(0, 0, 0, 0.8);
  opacity: 0.9;
}

/* Enhance visibility on hover */
.node:hover .node-label,
.node:hover .node-metric {
  font-weight: bold;
}

/* Particle system styles */
.particles {
  pointer-events: none;
}

.particle {
  pointer-events: none;
  filter: drop-shadow(0 0 6px currentColor);
  transition: opacity 0.3s ease;
}

/* Particle glow animation */
@keyframes particle-glow {
  0%, 100% {
    filter: drop-shadow(0 0 4px currentColor) brightness(1);
  }
  50% {
    filter: drop-shadow(0 0 8px currentColor) brightness(1.5);
  }
}

.particle {
  animation: particle-glow 2s ease-in-out infinite;
}
